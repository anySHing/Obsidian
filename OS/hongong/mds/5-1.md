# 빠른 CPU를 위한 설계 기법

클럭, 멀티코어, 멀티스레드가 무엇인지 알아보고, CPU 속도와 어떤 관계가 있는지 알아보자

<br><hr>

## 클럭

4장에서 학습했던 내용

1. 컴퓨터 부품들은 `클럭 신호`에 맞춰 일사불란하게 움직인다.
2. CPU는 '명령어 사이클' 이라는 정해진 흐름에 맞춰 명령어들을 실행한다.<br>

그렇다는건 클럭 신호가 빠르게 반복된다면(클럭 수가 높아진다면) CPU는 명령어 사이클을 더 빠르게 반복할 것이고, 다른 부품들도 그에 맞춰 더 빠르게 작동할 것.

실제로 그렇기 때문에 클럭 속도는 CPU 속도 단위로 간주되기도 함

`클럭 속도`는 Hz 단위로 측정한다.

클럭이 1초에 한번 반복된다면 CPU 클럭 속도는 1Hz, 실제 CPU 클럭 속도는 기본 속도는 2.5GHZ, 최대 속도는 4.9GHz라는 것을 알 수 있다.(1Ghz는 10억 Hz(10^9))

그렇다고 무작정 클럭 속도만 높인다고 좋은건 아니고 클럭 수가 높아지면 발열은 당연히 따라옴

**\* 클럭 속도는 일정하지 않음**

계속 일정한 속도를 유지하기 보다는 고성능을 요하는 순간에 순간적으로 클럭 속도를 높이고, 그렇지 않을 때는 유연하게 클럭 속도를 낮추기도 함.

겜미새들이 강제로 끌어올리는거 -> 오버클럭

<br><hr>

## 코어와

코어를 이해하려면 현대적인 관점에서 CPU라는 용어를 재해석해야함

앞서 CPU를 '명령어를 실행하는 부품'이라고 소개 했는데, 이건 전통적인 관점에서 본 것이고 현대 CPU는 내부에 또 실행하는 부품이 들어가 있음

-> **코어**라고 부름<br>

그러면 코어를 100개로 늘리면 연산 속도도 100배로 빨라지냐? 이건 아님

4인 1조 조별과제 하면 1명이 하드캐리 하듯이 코어도 똑같다고 한다

중요한 것은 코어마다 처리할 명령어를 얼마나 적절하게 분배하냐 임

<br><hr>

## 스레드

사전적 의미는 `실행 흐름의 단위`

CPU에서 사용되는 `하드웨어적 스레드`<br>

프로그램에서 사용되는 `소프트웨어적 스레드`가 존재

<br>

### 하드웨어적 스레드

H/W 측면에서 정의하면 `하나의 코어가 동시에 처리하는 명령어 단위`를 의미

지금까지 배운 CPU는 1코어 1스레드의 방식으로 처리

근데 요즘 스레드는 여러 스레드를 지원함. ex) 2코어 4스레드 -> 한번에 2개의 코어가 4개의 명령어를 처리할 수 있음 == 멀티 스레드 프로세서, 멀티 스레드 CPU

인텔은 지들 멀티 스레딩 기술에 하이퍼스레딩이라고 이름 붙임

<br>

### 소프트웨어적 스레드

S/W 측면에서 정의하면 `하나의 프로그램에서 독립적으로 실행되는 단위`를 의미

하나의 프로그램은 실행되는 과정에서 한 부분만 실행될 수도 있지만, 프로그램의 여러 부분이 동시에 실행될 수도 있음

ex) 사용자로부터 입력 받은 내용이 모니터에 출력되며 맞춤법을 검사도 하고 수시로 저장도 함

<br><hr>

<h2>멀티 스레드 프로세서</h2>

핵심은 **레지스터**

하나의 코어로 다수의 명령어를 동시에 처리하도록 하려면 프로그램 카운터, 스택 포인터, 메모리 버퍼 레지스터, 메모리 주소 레지스터와 같이

하나의 명령어를 처리하기 위해 꼭 필요한 레지스터 세트를 여러 개 가지고 있으면 된다<br>

코어 하나에 ALU 하나, 레지스터 세트가 2개가 들어있다면 코어에서 두가지 명령어를 동시에 실행됨

-> 프로그램 입장에서는 한 번에 하나의 명령어를 처리하는 CPU가 두 개 있는 것 처럼 보이게 됨

-> 하드웨어 스레드를 `논리 프로세서`라고 부르기도 한다.

<br><hr>

<h1>요약</h1>

* **코어**: CPU에서 명령어를 실행할 수 있는 '하드웨어 부품'
* **스레드**: 명령어를 실행하는 단위
* **멀티코어 프로세서**: 명령어를 실행할 수 있는 하드웨어 부품이 CPU 안에 두 개 이상 있는 CPU
* **멀티스레드 프로세서**: 하나의 코어로 여러 개의 명령어를 동시에 실행할 수 있는 CPU